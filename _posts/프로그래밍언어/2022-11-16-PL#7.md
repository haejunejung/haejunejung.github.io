---
title : PL#7
date : 2022.11.16
categories : 프로그래밍언어
---

PL#7

## 1. Reference & Declaration

- 프로그래밍 언어에서의 변수는 두 가지 방법으로 나타낼 수 있다.
- 첫 번째는 변수를 선언하는 경우 (=Declaration)
- 두 번째는 이미 존재하는 변수를 사용하는 경우 (=Reference)
- 특히, 이미 존재하는 변수를 사용하는 경우에는 변수가 어디에 선언되어 있는지에 따라 값이 변화할 수 있다. 
- 이 떄, 같은 변수가 여러 번 선언될 수 있고 그에 따라 변수가 영향을 미칠 수 있는 범위가 정해져있다.

<br/>

## 2. Scoping Rules

- Static Rule는 처음 변수가 선언된 지점에서의 값을 받는 것을 말한다.
- Dynamic Rule는 같은 변수가 여러 번 나올 때, 변수가 계속 변화한다.
- Lexical Rule는 현재 지점을 기준으로 양쪽으로 뻗어나가면서 해당 변수를 찾는 것을 말한다.
- 우리가 사용하는 대부분은 Lexical Rule을 따른다.
- 이유는 각각의 reference마다 declaration을 찾기 위해서 프로그램을 다시 실해할 필요가 없기 때문이다.
- Static Rule은 변수 선언부를 처음부터 찾아야 되고, Dynamic Rule은 마지막까지 프로그램을 돌린 다음의 변수 값을 가져오기 때문에 비용이 크다.

<br/>

## 3. Static & Dynamic Properties

- Static Property는 프로그램이 실행되지 않아도 결정되는 것이고,
- Dynamic Property는 프로그램이 실행함으로써 결정되는 것을 말한다.
- 예를 들면, C/C++에서는 Type이 컴파일 과정에서 정해져있으나 Python의 경우 Type이 프로그램이 실행되면서 변화될 수 있다.
- 이 때, Static & Dynamic Property는 Static & Dynamic Scoping과 다르다는 것을 유의할 필요가 있다.
- Lexical Scope의 경우는, 프로그램이 실행되지 않아도 어느 위치에서의 변수를 사용하는지가 정해져 있기 때문에 Static property를 가진다.

<br/>

## 4. Lexical Depth

- Lexical depth는 reference하기 위해서 declaration의 수를 표현한 것이다.

```
let x = 1
    in let y = 2
        in x + y
```

- x+y의 경우를 보면, y=2가 선언되고 바로 x+y에서 사용되었기 때문에 y의 depth는 0이고, x=1이 선언된 후 y=2가 선언되었기 때문에 x의 depth는 1이 된다.
- Lexical depth를 잘 사용할 수 있다면, 어느 시점에서의 변수를 사용해야하는지 알 수 있다. 

<br/>

## 5. Lexical address

- Lexical address는 위에서 구한 Lexical Depth를 이용하여 변수의 형태가 아닌, 임의의 주소값(위치값)을 이용하여 나타내는 것을 말한다.

```
let x = 1
    in let y = 2
        in x + y

lexical address로 바꾸면,

let 1
    in let 2
        in #1 + #0
```
- 이것을 통해서도 알 수 있듯이, Lexical scope는 Static Property를 가진다는 것을 알 수 있다. 만약 Static Property를 가지지 않았다면 값이 고정되지 않기 때문에, 위와 같은 표현을 할 수 없었을 것이다.

<br/>

## 6. Takeaways

- Nameless 표현법은 일반적으로 컴파일 과정에서 사용된다. 
- 처음에 프로그램을 Nameless 표현법으로 번역한 후,
- 어셈블리 코드와 같은 표현으로 바꾼다.
- 이 과정에서 Syntax Error와 같은 Error를 잡아낼 수 있다.

<br/>

컴파일은 인간이 이해할 수 있는 언어로 작성된 소스 코드를 CPU가 이해할 수 있는 언어로 번역하는 작업을 말하는데, 이 때 바로 어셈블러를 이용해서 어셈블리어 파일로 만드는 것으로 알고 있었다. 우리가 Lexical scoping
을 주로 이용하게 되는데, 이것이 어셈블리어로 번역할 때 도움을 주는 것 같다. 변수를 저장하고 참조하는데 필요한 비용이 크기 때문에 그것들을 제거하고 lexical address만으로 이를 해결함으로써 비용 절감의 효과를 가져올 수 있을 것 같다. PL은 전 범위를 시험으로 한다고 하니, 처음부터 다시 정리하면서 공부해야겠다 :)
