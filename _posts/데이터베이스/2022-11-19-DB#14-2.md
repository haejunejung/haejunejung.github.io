---
title : DB#14-2
date : 2022.11.18
categories : 데이터베이스
---

DB#14-2

DB#14-2 Normal Forms에 대한 정리글     
클로저를 통해 찾은 기본키들을 이용하여 테이블이 Good or not 확인하기


### Type of Key

1. Superkeys 

- A set of attributes in a table that decides all other attributes
- 즉, 몇몇의 속성들이 모여서 table 안의 모든 속성들을 결정지을 수 있어야 한다

2. Keys

- Superykey 중, minimal한 상태를 말한다
- mimimum은 minimal과 다르다 (추가공부자료)

3. Candidate keys

-  Key가 여러개 존재할 때, 각각의 key들을 candidate key라고 한다

4. Primary Keys & Secondary Keys

- Key 중 하나를 PK로 설정할 수 있다
- PK가 아닌 Key들을 Secondary Key라고 한다

<br/>

### Key를 찾는 법

기본적으로 Key를 찾는 법은 4가지 단계로 나눌 수 있다
1. table 안에서 가능한 모든 속성들의 결합들을 확인한다
2. 확인한 모든 속성들의 결합들에 대하여 closure를 확인한다
3. 만약 어떤 closure가 relation안의 모든 속성들을 포함한다면, key(or superkey)이다
4. 그 중 key가 될 수 있는 것들을 선별한다

<br/>

이 때, 쉽게 key를 찾을 수 있는 두 가지 tip!

1. 항상 combination이 작은 것부터 확인해라
2. 만약 right-hand side of any FD에 속성이 없다면, 그 속성은 반드시 key에 들어간다

<br/>

### Normal Forms

- "bad table"를 찾는 방법
- 1NF, 2NF, 3NF, BCNF ...
- 일반적으로 3NF, BCNF를 사용한다
- 1NF → 2NF → 3NF → BCNF → ... 로 갈수록 이전에 해결할 수 없는 이상문제를 해결할 수 있다


## 1. 1NF

- 각 Row마다 Column 값이 1개만 있어야 한다
- Atomic Value를 갖는다고 표현한다
- 1차 정규화를 통해서 Redundancy는 더 증가할 수 있다
- 하지만, 데이터의 논리적 구성이 되기 때문에 정규화가 필요하다

## 2. 2NF

- 테이블의 모든 Column이 완전 함수적 종속을 만족하는 것을 말한다
- 즉, 특정 Col에만 종속된 Col이 없어야 한다는 것이다
- 예를 들면, R(student, Age, Subject)
- Age는 student에만 종속되고, (student, subject)가 PK라고 했을 때
- Age가 student에만 종속되기 때문에 student라는 PK를 가진 테이블과 (student, subject)라는 PK를 가진 두 개의 테이블로 Decomposition 하는 것이다
- 삽입/갱신/삭제 이상에서, 복잡한 경우 갱신 이상을 겪을 수 있다 → 3NF로 해결

## 3. 3NF

- 기본키를 제외한 속성들 간의 이행적 함수 종속이 없는 것을 말한다
- 즉, 기본키 이외의 다른 Col이 그 외 다른 Col을 결정할 수 없는 것이다
- 1NF, 2NF에서 겪을 수 있는 Redundancy도 줄일 수 있다

## 4. BCNF

- 3NF를 조금 더 강화한 버전으로 3NF으로 해결할 수 없는 이상문제를 해결할 수 있다
- 3NF를 만족하면서 모든 결정자가 후보키 집합에 속한 정규형이다
- 모든 non-trivial FD의 left-hand side가 key를 포함해야 한다
- 4가지 단계로 BCNF인지 아닌지를 판별할 수 있다
- 더 이상 갱신/삭제 이상문제가 없다
- 매우 적은 중복성을 가지게 된다
- 원래의 테이블을 분해된 테이블로 재구성할 수 있다 (lossless join 특징이라 한다)
- 모든 FD를 보존하지는 않는다는 단점이 있다 → 해결이 필요하다!

<br/>

1. Relation 안의 Key를 찾는다
2. non-trivial FD를 찾는다
3. 모든 non-trivial FD의 left-hand side가 key를 포함하는지 확인한다
4. 모든 FD가 통과하면 BCNF이다
